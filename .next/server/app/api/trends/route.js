"use strict";(()=>{var e={};e.id=104,e.ids=[104],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7956:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>U,patchFetch:()=>F,requestAsyncStorage:()=>E,routeModule:()=>X,serverHooks:()=>$,staticGenerationAsyncStorage:()=>M});var n={};s.r(n),s.d(n,{GET:()=>O,dynamic:()=>C});var o=s(9303),a=s(8716),i=s(670),r=s(7070),l=s(3955),u=s(7852);l.Ry({user:l.Z_().optional(),reasoningEffort:l.Z_().optional()});var c={errorSchema:l.Ry({error:l.Ry({message:l.Z_(),type:l.Z_().nullish(),param:l.Yj().nullish(),code:l.G0([l.Z_(),l.Rx()]).nullish()})}),errorToMessage:e=>e.error.message},p=l.Ry({prompt_tokens:l.Rx().nullish(),completion_tokens:l.Rx().nullish(),total_tokens:l.Rx().nullish(),prompt_tokens_details:l.Ry({cached_tokens:l.Rx().nullish()}).nullish(),completion_tokens_details:l.Ry({reasoning_tokens:l.Rx().nullish(),accepted_prediction_tokens:l.Rx().nullish(),rejected_prediction_tokens:l.Rx().nullish()}).nullish()}).nullish(),d=(l.Ry({id:l.Z_().nullish(),created:l.Rx().nullish(),model:l.Z_().nullish(),choices:l.IX(l.Ry({message:l.Ry({role:l.i0("assistant").nullish(),content:l.Z_().nullish(),reasoning_content:l.Z_().nullish(),reasoning:l.Z_().nullish(),tool_calls:l.IX(l.Ry({id:l.Z_().nullish(),function:l.Ry({name:l.Z_(),arguments:l.Z_()})})).nullish()}),finish_reason:l.Z_().nullish()})),usage:p}),l.Ry({echo:l.O7().optional(),logitBias:l.IM(l.Z_(),l.Rx()).optional(),suffix:l.Z_().optional(),user:l.Z_().optional()}),l.Ry({prompt_tokens:l.Rx(),completion_tokens:l.Rx(),total_tokens:l.Rx()})),h=(l.Ry({id:l.Z_().nullish(),created:l.Rx().nullish(),model:l.Z_().nullish(),choices:l.IX(l.Ry({text:l.Z_(),finish_reason:l.Z_()})),usage:d.nullish()}),l.Ry({dimensions:l.Rx().optional(),user:l.Z_().optional()}),l.Ry({data:l.IX(l.Ry({embedding:l.IX(l.Rx())})),usage:l.Ry({prompt_tokens:l.Rx()}).nullish(),providerMetadata:l.IM(l.Z_(),l.IM(l.Z_(),l.Yj())).optional()}),class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:s,aspectRatio:n,seed:o,providerOptions:a,headers:i,abortSignal:r}){var l,p,d,h,g;let f=[];null!=n&&f.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=o&&f.push({type:"unsupported-setting",setting:"seed"});let _=null!=(d=null==(p=null==(l=this.config._internal)?void 0:l.currentDate)?void 0:p.call(l))?d:new Date,{value:y,responseHeaders:x}=await (0,u.A8)({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:(0,u.NF)(this.config.headers(),i),body:{model:this.modelId,prompt:e,n:t,size:s,...null!=(h=a.openai)?h:{},response_format:"b64_json"},failedResponseHandler:(0,u.Sq)(null!=(g=this.config.errorStructure)?g:c),successfulResponseHandler:(0,u.tc)(m),abortSignal:r,fetch:this.config.fetch});return{images:y.data.map(e=>e.b64_json),warnings:f,response:{timestamp:_,modelId:this.modelId,headers:x}}}}),m=l.Ry({data:l.IX(l.Ry({b64_json:l.Z_()}))}),g=s(1760);function f({id:e,model:t,created:s}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=s?new Date(1e3*s):void 0}}function _(e){switch(e){case"stop":return"stop";case"length":return"length";case"tool_calls":case"function_call":return"tool-calls";case"content_filter":return"content-filter";default:return"unknown"}}var y=l.Ry({type:l.i0("web"),country:l.Z_().length(2).optional(),excludedWebsites:l.IX(l.Z_()).max(5).optional(),allowedWebsites:l.IX(l.Z_()).max(5).optional(),safeSearch:l.O7().optional()}),x=l.Ry({type:l.i0("x"),xHandles:l.IX(l.Z_()).optional()}),R=l.Ry({type:l.i0("news"),country:l.Z_().length(2).optional(),excludedWebsites:l.IX(l.Z_()).max(5).optional(),safeSearch:l.O7().optional()}),v=l.Ry({type:l.i0("rss"),links:l.IX(l.Z_().url()).max(1)}),k=l.VK("type",[y,x,R,v]),Z=l.Ry({reasoningEffort:l.Km(["low","high"]).optional(),searchParameters:l.Ry({mode:l.Km(["off","auto","on"]),returnCitations:l.O7().optional(),fromDate:l.Z_().optional(),toDate:l.Z_().optional(),maxSearchResults:l.Rx().min(1).max(50).optional(),sources:l.IX(k).optional()}).optional()}),b=l.Ry({error:l.Ry({message:l.Z_(),type:l.Z_().nullish(),param:l.Yj().nullish(),code:l.G0([l.Z_(),l.Rx()]).nullish()})}),w=(0,u.Sq)({errorSchema:b,errorToMessage:e=>e.error.message}),I=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:s,topP:n,topK:o,frequencyPenalty:a,presencePenalty:i,stopSequences:r,seed:l,responseFormat:c,providerOptions:p,tools:d,toolChoice:h}){var m,f,_;let y=[],x=null!=(m=await (0,u.c1)({provider:"xai",providerOptions:p,schema:Z}))?m:{};null!=o&&y.push({type:"unsupported-setting",setting:"topK"}),null!=a&&y.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=i&&y.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=r&&y.push({type:"unsupported-setting",setting:"stopSequences"}),null!=c&&"json"===c.type&&null!=c.schema&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});let{messages:R,warnings:v}=function(e){let t=[];for(let{role:s,content:n}of e)switch(s){case"system":t.push({role:"system",content:n});break;case"user":if(1===n.length&&"text"===n[0].type){t.push({role:"user",content:n[0].text});break}t.push({role:"user",content:n.map(e=>{switch(e.type){case"text":return{type:"text",text:e.text};case"file":if(e.mediaType.startsWith("image/")){let t="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"image_url",image_url:{url:e.data instanceof URL?e.data.toString():`data:${t};base64,${(0,u.QF)(e.data)}`}}}throw new g.A_({functionality:`file part media type ${e.mediaType}`})}})});break;case"assistant":{let e="",s=[];for(let t of n)switch(t.type){case"text":e+=t.text;break;case"tool-call":s.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.input)}})}t.push({role:"assistant",content:e,tool_calls:s.length>0?s:void 0});break}case"tool":for(let e of n){let s;let n=e.output;switch(n.type){case"text":case"error-text":s=n.value;break;case"content":case"json":case"error-json":s=JSON.stringify(n.value)}t.push({role:"tool",tool_call_id:e.toolCallId,content:s})}break;default:throw Error(`Unsupported role: ${s}`)}return{messages:t,warnings:[]}}(e);y.push(...v);let{tools:k,toolChoice:b,toolWarnings:w}=function({tools:e,toolChoice:t}){e=(null==e?void 0:e.length)?e:void 0;let s=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:s};let n=[];for(let t of e)"provider-defined"===t.type?s.push({type:"unsupported-tool",tool:t}):n.push({type:"function",function:{name:t.name,description:t.description,parameters:t.inputSchema}});if(null==t)return{tools:n,toolChoice:void 0,toolWarnings:s};let o=t.type;switch(o){case"auto":case"none":return{tools:n,toolChoice:o,toolWarnings:s};case"required":return{tools:n,toolChoice:"required",toolWarnings:s};case"tool":return{tools:n,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:s};default:throw new g.A_({functionality:`tool choice type: ${o}`})}}({tools:d,toolChoice:h});return y.push(...w),{args:{model:this.modelId,max_tokens:t,temperature:s,top_p:n,seed:l,reasoning_effort:x.reasoningEffort,response_format:(null==c?void 0:c.type)==="json"?null!=c.schema?{type:"json_schema",json_schema:{name:null!=(f=c.name)?f:"response",schema:c.schema,strict:!0}}:{type:"json_object"}:void 0,search_parameters:x.searchParameters?{mode:x.searchParameters.mode,return_citations:x.searchParameters.returnCitations,from_date:x.searchParameters.fromDate,to_date:x.searchParameters.toDate,max_search_results:x.searchParameters.maxSearchResults,sources:null==(_=x.searchParameters.sources)?void 0:_.map(e=>({type:e.type,..."web"===e.type&&{country:e.country,excluded_websites:e.excludedWebsites,allowed_websites:e.allowedWebsites,safe_search:e.safeSearch},..."x"===e.type&&{x_handles:e.xHandles},..."news"===e.type&&{country:e.country,excluded_websites:e.excludedWebsites,safe_search:e.safeSearch},..."rss"===e.type&&{links:e.links}}))}:void 0,messages:R,tools:k,tool_choice:b},warnings:y}}async doGenerate(e){var t,s,n;let{args:o,warnings:a}=await this.getArgs(e),{responseHeaders:i,value:r,rawValue:l}=await (0,u.A8)({url:`${null!=(t=this.config.baseURL)?t:"https://api.x.ai/v1"}/chat/completions`,headers:(0,u.NF)(this.config.headers(),e.headers),body:o,failedResponseHandler:w,successfulResponseHandler:(0,u.tc)(A),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=r.choices[0],p=[];if(null!=c.message.content&&c.message.content.length>0){let e=c.message.content,t=o.messages[o.messages.length-1];(null==t?void 0:t.role)==="assistant"&&e===t.content&&(e=""),e.length>0&&p.push({type:"text",text:e})}if(null!=c.message.reasoning_content&&c.message.reasoning_content.length>0&&p.push({type:"reasoning",text:c.message.reasoning_content}),null!=c.message.tool_calls)for(let e of c.message.tool_calls)p.push({type:"tool-call",toolCallId:e.id,toolName:e.function.name,input:e.function.arguments});if(null!=r.citations)for(let e of r.citations)p.push({type:"source",sourceType:"url",id:this.config.generateId(),url:e});return{content:p,finishReason:_(c.finish_reason),usage:{inputTokens:r.usage.prompt_tokens,outputTokens:r.usage.completion_tokens,totalTokens:r.usage.total_tokens,reasoningTokens:null!=(n=null==(s=r.usage.completion_tokens_details)?void 0:s.reasoning_tokens)?n:void 0},request:{body:o},response:{...f(r),headers:i,body:l},warnings:a}}async doStream(e){var t;let{args:s,warnings:n}=await this.getArgs(e),o={...s,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:a,value:i}=await (0,u.A8)({url:`${null!=(t=this.config.baseURL)?t:"https://api.x.ai/v1"}/chat/completions`,headers:(0,u.NF)(this.config.headers(),e.headers),body:o,failedResponseHandler:w,successfulResponseHandler:(0,u.cP)(T),abortSignal:e.abortSignal,fetch:this.config.fetch}),r="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},c=!0,p={},d={},h=this;return{stream:i.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:n})},transform(t,s){var n,a;if(e.includeRawChunks&&s.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){s.enqueue({type:"error",error:t.error});return}let i=t.value;if(c&&(s.enqueue({type:"response-metadata",...f(i)}),c=!1),null!=i.citations)for(let e of i.citations)s.enqueue({type:"source",sourceType:"url",id:h.config.generateId(),url:e});null!=i.usage&&(l.inputTokens=i.usage.prompt_tokens,l.outputTokens=i.usage.completion_tokens,l.totalTokens=i.usage.total_tokens,l.reasoningTokens=null!=(a=null==(n=i.usage.completion_tokens_details)?void 0:n.reasoning_tokens)?a:void 0);let u=i.choices[0];if((null==u?void 0:u.finish_reason)!=null&&(r=_(u.finish_reason)),(null==u?void 0:u.delta)==null)return;let m=u.delta,g=u.index;if(null!=m.content&&m.content.length>0){let e=m.content,t=o.messages[o.messages.length-1];if((null==t?void 0:t.role)==="assistant"&&e===t.content)return;let n=`text-${i.id||g}`;null==p[n]&&(p[n]={type:"text"},s.enqueue({type:"text-start",id:n})),s.enqueue({type:"text-delta",id:n,delta:e})}if(null!=m.reasoning_content&&m.reasoning_content.length>0){let e=`reasoning-${i.id||g}`;if(d[e]===m.reasoning_content)return;d[e]=m.reasoning_content,null==p[e]&&(p[e]={type:"reasoning"},s.enqueue({type:"reasoning-start",id:e})),s.enqueue({type:"reasoning-delta",id:e,delta:m.reasoning_content})}if(null!=m.tool_calls)for(let e of m.tool_calls){let t=e.id;s.enqueue({type:"tool-input-start",id:t,toolName:e.function.name}),s.enqueue({type:"tool-input-delta",id:t,delta:e.function.arguments}),s.enqueue({type:"tool-input-end",id:t}),s.enqueue({type:"tool-call",toolCallId:t,toolName:e.function.name,input:e.function.arguments})}},flush(e){for(let[t,s]of Object.entries(p))e.enqueue({type:"text"===s.type?"text-end":"reasoning-end",id:t});e.enqueue({type:"finish",finishReason:r,usage:l})}})),request:{body:o},response:{headers:a}}}},S=l.Ry({prompt_tokens:l.Rx(),completion_tokens:l.Rx(),total_tokens:l.Rx(),completion_tokens_details:l.Ry({reasoning_tokens:l.Rx().nullish()}).nullish()}),A=l.Ry({id:l.Z_().nullish(),created:l.Rx().nullish(),model:l.Z_().nullish(),choices:l.IX(l.Ry({message:l.Ry({role:l.i0("assistant"),content:l.Z_().nullish(),reasoning_content:l.Z_().nullish(),tool_calls:l.IX(l.Ry({id:l.Z_(),type:l.i0("function"),function:l.Ry({name:l.Z_(),arguments:l.Z_()})})).nullish()}),index:l.Rx(),finish_reason:l.Z_().nullish()})),object:l.i0("chat.completion"),usage:S,citations:l.IX(l.Z_().url()).nullish()}),T=l.Ry({id:l.Z_().nullish(),created:l.Rx().nullish(),model:l.Z_().nullish(),choices:l.IX(l.Ry({delta:l.Ry({role:l.Km(["assistant"]).optional(),content:l.Z_().nullish(),reasoning_content:l.Z_().nullish(),tool_calls:l.IX(l.Ry({id:l.Z_(),type:l.i0("function"),function:l.Ry({name:l.Z_(),arguments:l.Z_()})})).nullish()}),finish_reason:l.Z_().nullish(),index:l.Rx()})),usage:S.nullish(),citations:l.IX(l.Z_().url()).nullish()}),q={errorSchema:b,errorToMessage:e=>e.error.message},j=function(e={}){var t;let s=(0,u.QT)(null!=(t=e.baseURL)?t:"https://api.x.ai/v1"),n=()=>({Authorization:`Bearer ${(0,u.pd)({apiKey:e.apiKey,environmentVariableName:"XAI_API_KEY",description:"xAI API key"})}`,...e.headers}),o=t=>new I(t,{provider:"xai.chat",baseURL:s,headers:n,generateId:u.Ox,fetch:e.fetch}),a=t=>new h(t,{provider:"xai.image",url:({path:e})=>`${s}${e}`,headers:n,fetch:e.fetch,errorStructure:q}),i=e=>o(e);return i.languageModel=o,i.chat=o,i.textEmbeddingModel=e=>{throw new g.JJ({modelId:e,modelType:"textEmbeddingModel"})},i.imageModel=a,i.image=a,i}(),P=s(3110);let C="force-dynamic",N=`Eres un asistente para un editor de El Economista (Argentina). 
Debes buscar se\xf1ales de tendencia en tiempo real relevantes para hombres de 20 a 60 a\xf1os interesados en econom\xeda, finanzas, mercados, pol\xedtica econ\xf3mica, tasas, inflaci\xf3n, CEPO, d\xf3lar, MEP, blue, soja, exportaciones, y empresas argentinas. 
Devuelve una lista de hasta 18 tendencias CONCISAS. Cada \xedtem debe tener: title (m\xe1x 90 chars), summary (1-2 frases), score (0-100 seg\xfan relevancia), tags (3-6 hashtags), sourceUrl (si existe). 
No inventes datos: usa Live Search y cita fuentes si est\xe1n disponibles.`;async function O(){try{let e=j("grok-3-latest"),{text:t,sources:s}=await (0,P._4)({model:e,prompt:`${N}
Formatea la salida estrictamente como JSON v\xe1lido bajo la clave "trends" (array).`,providerOptions:{xai:{searchParameters:{mode:"on",returnCitations:!0,maxSearchResults:30,sources:[{type:"x",xHandles:["UVA","BCRAOFICIAL","Economia_Ar","AmbitoFinanciero","IEconTerm","elEconomista_es"]},{type:"news",country:"AR",safeSearch:!0},{type:"rss",links:["https://status.x.ai/feed.xml"]}]}}}}),n=null;try{n=JSON.parse(t)}catch{let e=t.indexOf("{"),s=t.lastIndexOf("}");e>=0&&s>e&&(n=JSON.parse(t.slice(e,s+1)))}let o=(Array.isArray(n?.trends)?n.trends:[]).map((e,t)=>({id:String(e.id??t),title:String(e.title??"").slice(0,120),summary:String(e.summary??""),score:Number.isFinite(e.score)?Number(e.score):50,tags:Array.isArray(e.tags)?e.tags.map(e=>String(e)):[],sourceUrl:e.sourceUrl?String(e.sourceUrl):void 0}));return r.NextResponse.json({trends:o,sources:s??[]})}catch(e){return console.error(e),r.NextResponse.json({trends:[]},{status:200})}}let X=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/trends/route",pathname:"/api/trends",filename:"route",bundlePath:"app/api/trends/route"},resolvedPagePath:"/workspace/app/api/trends/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:E,staticGenerationAsyncStorage:M,serverHooks:$}=X,U="/api/trends/route";function F(){return(0,i.patchFetch)({serverHooks:$,staticGenerationAsyncStorage:M})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[276,837],()=>s(7956));module.exports=n})();